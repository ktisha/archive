ruslan:
1. переделать чтение
2. хранить токены
3. обработка ошибок

kate:
1. таки перейти на BoolVector (чтобы никаких битовых операций)  +
2. научиться частично подставлять значение и упрощать схему
